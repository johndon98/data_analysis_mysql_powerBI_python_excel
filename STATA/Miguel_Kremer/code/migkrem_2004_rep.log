--------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\johnd\OneDrive\Desktop\sose21\Dev\miguel_kremer(2004)\code\migkrem_2004_rep.log
  log type:  text
 opened on:  28 Jan 2024, 01:02:24

. set more off 

. 
. *load data
. use ".\data\namelist.dta", clear

. 
. keep if visit== 981
(521,880 observations deleted)

. drop if dupid==2
(11 observations deleted)

. 
. merge 1:1 pupid using ".\data\pupq.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        20,425
        from master                    19,728  (_merge==1)
        from using                        697  (_merge==2)

    matched                            15,053  (_merge==3)
    -----------------------------------------

. 
. *e)
. gen days_present = (20 - absdays_98_6)/20
(22,500 missing values generated)

. gen sick_often = fallsick_98_37==3

. replace sick_often =. if fallsick_98_37==.
(22,357 real changes made, 22,357 to missing)

. gen child_clean = clean_98_15==1

. replace child_clean =. if clean_98_15==.
(22,349 real changes made, 22,349 to missing)

. 
. *f) Table1
. preserve

. collapse (mean)sex elg98 stdgap yrbirth days_present bloodst_98_58 sick_often malaria_98_48 child_clea
> n wgrp* (count)count=pupid, by (schid)

. 
. *Panel A
. bysort wgrp:summarize sex elg98 stdgap yrbirth [aw=count]

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
         sex |      25       11634    .5329346   .0274165   .4649681        .58
       elg98 |      25       11634     .885874   .0247304   .8320313   .9418604
      stdgap |      25       11634   -1.972535   .2533046  -2.605882  -1.580786
     yrbirth |      25       11634    1986.193   .5321102   1985.276   1987.464

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
         sex |      25       11990    .5096775   .1047777   .0200893   .5714286
       elg98 |      25       11990    .8919381   .0248131   .8363096          1
      stdgap |      25       11990   -1.821623   .3942747  -2.539063  -.7777778
     yrbirth |      25       11990    1986.543   .6206054   1985.349   1988.789

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
         sex |      25       11157    .5221049   .0213989   .4585635   .5606061
       elg98 |      25       11157    .8842065   .0199719        .84   .9104478
      stdgap |      25       11157   -1.969827    .335163  -2.612903  -1.384921
     yrbirth |      25       11157    1985.787   .5752325   1984.777   1986.964

--------------------------------------------------------------------------------------------------------
-> wgrp = .

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
         sex |       0           0
       elg98 |       0           0
      stdgap |       0           0
     yrbirth |       0           0


. 
. *checking difference between groups, basecategory here is wgrp3
. local replace replace

. foreach i in sex elg98 stdgap yrbirth {
  2.         quietly:reg `i' ib3.wgrp [aw=count]
  3.         outreg2 using ".\output\table1_panelA.xlsx", dec(2) `replace'
  4.         local replace
  5. }
.\output\table1_panelA.xlsx
dir : seeout
.\output\table1_panelA.xlsx
dir : seeout
.\output\table1_panelA.xlsx
dir : seeout
.\output\table1_panelA.xlsx
dir : seeout

. 
. restore

. 
. *Panel B
. preserve

. drop if pupdate_98_1=="" &  schid_98_2==.  /*keeping only 1998 pupils*/
(22,348 observations deleted)

. 
. collapse (mean)sex elg98 stdgap yrbirth days_present bloodst_98_58 sick_often malaria_98_48 child_clea
> n wgrp* (count)count=pupid, by (schid)

. 
. bysort wgrp:summarize days_present bloodst_98_58 sick_often malaria_98_48 child_clean [aw=count] if st
> d>=3|std<=8

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
days_present |      25        4493     .972706   .0144424   .9272727   .9969512
bloodst_9~58 |      25        4493    .2618784   .1190931    .097561   .5207373
  sick_often |      25        4493    .0974707   .0487847          0   .1862745
malaria_9~48 |      25        4493    .3671713   .0921862   .2184466   .5669292
 child_clean |      25        4493    .6030973   .1179383   .2352941   .8200837

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
days_present |      25        3967     .963098   .0170925   .9185898          1
bloodst_9~58 |      25        3967    .2172927   .0970187          0         .5
  sick_often |      25        3967    .0985631   .0314467          0   .1724138
malaria_9~48 |      25        3967    .3834132   .1019163          0        .75
 child_clean |      25        3967    .6594404    .123598          0   .9663461

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
days_present |      25        4208    .9694485   .0090759   .9415493   .9810204
bloodst_9~58 |      25        4208    .1946293   .1302616   .0873362    .754717
  sick_often |      25        4208    .0805608   .0417754   .0097087   .1673307
malaria_9~48 |      25        4208    .4026468   .1052918   .2297297   .6994535
 child_clean |      25        4208     .667538   .0980546   .3207547    .796875

--------------------------------------------------------------------------------------------------------
-> wgrp = .

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
days_present |       1         462    .9678337          .   .9678337   .9678337
bloodst_9~58 |       1         462    .2619048          .   .2619048   .2619048
  sick_often |       1         462    .1561822          .   .1561822   .1561822
malaria_9~48 |       1         462    .3852814          .   .3852814   .3852814
 child_clean |       1         462    .6493506          .   .6493506   .6493506


. 
. *checking difference between groups, basecategory here is wgrp3
. local replace replace

. foreach i in days_present bloodst_98_58 sick_often malaria_98_48 child_clean {
  2.         quietly:reg `i' ib3.wgrp [aw=count] if std>=3|std<=8
  3.         outreg2 using ".\output\table1_panelB.xlsx", dec(2) `replace'
  4.         local replace
  5. }
.\output\table1_panelB.xlsx
dir : seeout
.\output\table1_panelB.xlsx
dir : seeout
.\output\table1_panelB.xlsx
dir : seeout
.\output\table1_panelB.xlsx
dir : seeout
.\output\table1_panelB.xlsx
dir : seeout

. restore

. 
. *g)Panel C
. use ".\data\schoolvar.dta", clear

. 
. bysort wgrp:summarize distlake pup_pop latr_pup z_inf98 pop1_3km_updated pop1_6km_updated popT_3km_upd
> ated popT_6km_updated

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    distlake |         25    10.03356    5.425798          0     19.381
     pup_pop |         25      392.72    158.3297        148        748
    latr_pup |         24    .0074168    .0033881   .0022779   .0142857
     z_inf98 |         25    .3688953    .1058442   .2206897   .5326461
pop1_3km_u~d |         25     430.386     419.985          0   1518.213
-------------+---------------------------------------------------------
pop1_6km_u~d |         25    1587.985    839.7312   291.0941   2999.993
popT_3km_u~d |         25    1272.716    779.7018   208.7699   2975.706
popT_6km_u~d |         25    4703.973     1379.14   2072.661   7119.088

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    distlake |         24    9.922959    8.116067          0     24.742
     pup_pop |         25       403.8    275.6167         14       1351
    latr_pup |         22    .0061782     .003619   .0007402   .0144928
     z_inf98 |         25    .3665191    .1005379   .2206897   .5326461
pop1_3km_u~d |         25    433.1711    436.5513          0   1548.964
-------------+---------------------------------------------------------
pop1_6km_u~d |         25     1476.14    713.9848          0   3284.122
popT_3km_u~d |         25    1369.087    752.7977          0   3023.563
popT_6km_u~d |         25    4628.874     1317.79   1904.482   7314.634

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    distlake |         25     9.45548    6.399379       .355     21.956
     pup_pop |         25      375.88    153.5291         95        675
    latr_pup |         24    .0065807    .0033304   .0015291   .0140845
     z_inf98 |         25     .360046    .1078718   .2206897   .5326461
pop1_3km_u~d |         25    344.5075    372.9133          0   1265.049
-------------+---------------------------------------------------------
pop1_6km_u~d |         25    1641.851     795.613          0   3222.548
popT_3km_u~d |         25    1151.869    670.2877          0   3053.657
popT_6km_u~d |         25    4653.967    1589.091   2019.381   7302.228


. 
. *checking difference between groups, basecategory here is wgrp3
. local replace replace

. foreach i in distlake pup_pop latr_pup z_inf98 pop1_3km_updated pop1_6km_updated popT_3km_updated popT
> _6km_updated {
  2.         quietly:reg `i' ib3.wgrp 
  3.         outreg2 using ".\output\table1_panelC.xlsx", dec(2) `replace'
  4.         local replace
  5. }
.\output\table1_panelC.xlsx
dir : seeout
.\output\table1_panelC.xlsx
dir : seeout
.\output\table1_panelC.xlsx
dir : seeout
.\output\table1_panelC.xlsx
dir : seeout
.\output\table1_panelC.xlsx
dir : seeout
.\output\table1_panelC.xlsx
dir : seeout
.\output\table1_panelC.xlsx
dir : seeout
.\output\table1_panelC.xlsx
dir : seeout

. 
. *Table 3
. 
. use ".\data\comply.dta", clear

. 
. duplicates report pupid     

Duplicates in terms of pupid

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |        44428             0
        2 |           66            33
       76 |           76            75
--------------------------------------

. duplicates tag pupid, generate(duplicate)

Duplicates in terms of pupid

. drop if duplicate>0
(142 observations deleted)

. duplicates report pupid

Duplicates in terms of pupid

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |        44428             0
--------------------------------------

. 
. save ".\data\comply_new.dta", replace
file .\data\comply_new.dta saved

. 
. use ".\data\namelist.dta", clear

. 
. keep if visit== 981
(521,880 observations deleted)

. drop if dupid==2
(11 observations deleted)

. 
. merge 1:1 pupid using ".\data\comply_new.dta"
(label sch_label already defined)

    Result                           # of obs.
    -----------------------------------------
    not matched                        11,099
        from master                       726  (_merge==1)
        from using                     10,373  (_merge==2)

    matched                            34,055  (_merge==3)
    -----------------------------------------

. 
. *top panel (grade 1-8)
. bysort wgrp: tab any98 if elg98==1                   /*& inrange(std98v1,1,8)*/                       
>              

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

Any medical |
  treatment |
    in 1998 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,949       22.57       22.57
          1 |      6,688       77.43      100.00
------------+-----------------------------------
      Total |      8,637      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

Any medical |
  treatment |
    in 1998 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      8,526      100.00      100.00
------------+-----------------------------------
      Total |      8,526      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

Any medical |
  treatment |
    in 1998 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      8,046      100.00      100.00
------------+-----------------------------------
      Total |      8,046      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = .
no observations


. 
. bysort wgrp: tab any98 if elg98==0                  /*& inrange(std98v1,1,8)*/                        
>    

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

Any medical |
  treatment |
    in 1998 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,038       80.40       80.40
          1 |        253       19.60      100.00
------------+-----------------------------------
      Total |      1,291      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

Any medical |
  treatment |
    in 1998 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,238      100.00      100.00
------------+-----------------------------------
      Total |      1,238      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

Any medical |
  treatment |
    in 1998 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,236      100.00      100.00
------------+-----------------------------------
      Total |      1,236      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = .
no observations


. 
. *middle panel (grade 1-7)
. bysort wgrp: tab any99 if elg99==1 & inrange(std98v1,1,7)

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,971       39.98       39.98
          1 |      4,461       60.02      100.00
------------+-----------------------------------
      Total |      7,432      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,933       41.60       41.60
          1 |      4,117       58.40      100.00
------------+-----------------------------------
      Total |      7,050      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      6,659       98.71       98.71
          1 |         87        1.29      100.00
------------+-----------------------------------
      Total |      6,746      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = .
no observations


. 
. bysort wgrp: tab any99 if elg99==0 & inrange(std98v1,1,7)

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,387       92.34       92.34
          1 |        115        7.66      100.00
------------+-----------------------------------
      Total |      1,502      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,210       89.90       89.90
          1 |        136       10.10      100.00
------------+-----------------------------------
      Total |      1,346      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,371       99.85       99.85
          1 |          2        0.15      100.00
------------+-----------------------------------
      Total |      1,373      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = .
no observations


. 
. *bottom panel (grade 1-7, enrolled in 1999)
. drop if (totprs99==0|totprs99==.)       /*dropping those not present in 1999 visit*/
(21,173 observations deleted)

. bysort wgrp: tab any99 if elg99==1 & inrange(std98v1,1,7)

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,645       27.07       27.07
          1 |      4,432       72.93      100.00
------------+-----------------------------------
      Total |      6,077      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,613       28.45       28.45
          1 |      4,056       71.55      100.00
------------+-----------------------------------
      Total |      5,669      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      5,414       98.47       98.47
          1 |         84        1.53      100.00
------------+-----------------------------------
      Total |      5,498      100.00


. 
. bysort wgrp: tab any99 if elg99==0 & inrange(std98v1,1,7) 

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        998       89.75       89.75
          1 |        114       10.25      100.00
------------+-----------------------------------
      Total |      1,112      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        884       86.75       86.75
          1 |        135       13.25      100.00
------------+-----------------------------------
      Total |      1,019      100.00

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

Any medical |
  treatment |
    in 1999 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,003       99.80       99.80
          1 |          2        0.20      100.00
------------+-----------------------------------
      Total |      1,005      100.00


. 
. *Table 5
. 
. use ".\data\namelist.dta", clear

. 
. keep if visit== 981
(521,880 observations deleted)

. drop if dupid==2
(11 observations deleted)

. 
. merge 1:1 pupid using ".\data\wormed.dta"
(label std_label already defined)
(label sch_label already defined)

    Result                           # of obs.
    -----------------------------------------
    not matched                        31,037
        from master                    30,900  (_merge==1)
        from using                        137  (_merge==2)

    matched                             3,881  (_merge==3)
    -----------------------------------------

. drop if _merge!=3
(31,037 observations deleted)

. drop if any_ics99==.
(1,552 observations deleted)

. 
. *Panel A
. 
. bysort wgrp: sum any_ics98 any_ics99  /*if inrange(std98v1,3,8)*/

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics98 |        603    .3764511    .4848975          0          1
   any_ics99 |        862    .2691415    .4437711          0          1

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics98 |          0
   any_ics99 |      1,466    .5238745    .4996001          0          1

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics98 |          0
   any_ics99 |          1           0           .          0          0


. *Group1-Group2
. reg any_ics98 ib2.wgrp, vce(cluster schid) 
note: 1.wgrp omitted because of collinearity
note: 2b.wgrp identifies no observations in the sample

Linear regression                               Number of obs     =        603
                                                F(0, 24)          =       0.00
                                                Prob > F          =          .
                                                R-squared         =     0.0000
                                                Root MSE          =      .4849

                                 (Std. Err. adjusted for 25 clusters in schid)
------------------------------------------------------------------------------
             |               Robust
   any_ics98 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        wgrp |
          1  |          0  (omitted)
          2  |          0  (empty)
             |
       _cons |   .3764511   .0371415    10.14   0.000     .2997948    .4531074
------------------------------------------------------------------------------

. reg any_ics99 ib2.wgrp, vce(cluster schid)

Linear regression                               Number of obs     =      2,329
                                                F(1, 49)          =          .
                                                Prob > F          =          .
                                                R-squared         =     0.0620
                                                Root MSE          =     .47969

                                 (Std. Err. adjusted for 50 clusters in schid)
------------------------------------------------------------------------------
             |               Robust
   any_ics99 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        wgrp |
          1  |   -.254733   .0620195    -4.11   0.000    -.3793658   -.1301001
          3  |  -.5238745   .0484833   -10.81   0.000    -.6213053   -.4264437
             |
       _cons |   .5238745   .0484833    10.81   0.000     .4264437    .6213053
------------------------------------------------------------------------------

. 
. *proportion anemic
. gen anemia=0

. replace anemia=1 if hb<100
(25 real changes made)

. replace anemia=. if hb==.
(1,560 real changes made, 1,560 to missing)

. 
. bysort wgrp: sum anemia 

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      anemia |        290    .0206897    .1425893          0          1

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      anemia |        479     .039666    .1953773          0          1

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      anemia |          0


. reg anemia ib2.wgrp, vce(cluster schid)

Linear regression                               Number of obs     =        769
                                                F(1, 36)          =       1.75
                                                Prob > F          =     0.1940
                                                R-squared         =     0.0027
                                                Root MSE          =     .17734

                                 (Std. Err. adjusted for 37 clusters in schid)
------------------------------------------------------------------------------
             |               Robust
      anemia |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      1.wgrp |  -.0189763   .0143363    -1.32   0.194    -.0480516     .010099
       _cons |    .039666   .0101807     3.90   0.000     .0190185    .0603134
------------------------------------------------------------------------------

. 
. *panel C
. 
. use ".\data\namelist.dta", clear

. 
. keep if visit== 981
(521,880 observations deleted)

. drop if dupid==2
(11 observations deleted)

. 
. merge 1:1 pupid using ".\data\pupq.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        20,425
        from master                    19,728  (_merge==1)
        from using                        697  (_merge==2)

    matched                            15,053  (_merge==3)
    -----------------------------------------

. 
. gen child_clean = clean_99_13==1

. replace child_clean =. if clean_99_13==.
(26,129 real changes made, 26,129 to missing)

. gen wear_shoes = shoes_99_10==1|shoes_99_10==2

. replace wear_shoes=. if shoes_99_10==.
(26,133 real changes made, 26,133 to missing)

. 
. bysort wgrp: sum child_clean wear_shoes dayswat_99_36 if wgrp==1|wgrp==2

--------------------------------------------------------------------------------------------------------
-> wgrp = 1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 child_clean |      3,539    .5922577    .4914843          0          1
  wear_shoes |      3,542    .2360248    .4246976          0          1
dayswat_9~36 |      3,493     2.39708    2.795034          0          7

--------------------------------------------------------------------------------------------------------
-> wgrp = 2

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 child_clean |      2,587     .626208    .4839029          0          1
  wear_shoes |      2,584    .2592879    .4383287          0          1
dayswat_9~36 |      2,544    2.388365    2.806395          0          7

--------------------------------------------------------------------------------------------------------
-> wgrp = 3

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 child_clean |          0
  wear_shoes |          0
dayswat_9~36 |          0

--------------------------------------------------------------------------------------------------------
-> wgrp = .

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 child_clean |          0
  wear_shoes |          0
dayswat_9~36 |          0


. reg child_clean ib2.wgrp, vce(cluster schid)

Linear regression                               Number of obs     =      9,034
                                                F(2, 73)          =       0.99
                                                Prob > F          =     0.3752
                                                R-squared         =     0.0012
                                                Root MSE          =     .48974

                                 (Std. Err. adjusted for 74 clusters in schid)
------------------------------------------------------------------------------
             |               Robust
 child_clean |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        wgrp |
          1  |  -.0339503    .026606    -1.28   0.206    -.0869759    .0190754
          3  |   -.040926   .0318964    -1.28   0.204    -.1044954    .0226434
             |
       _cons |    .626208    .023449    26.71   0.000     .5794741    .6729418
------------------------------------------------------------------------------

. reg wear_shoes ib2.wgrp, vce(cluster schid)

Linear regression                               Number of obs     =      9,030
                                                F(2, 73)          =       0.24
                                                Prob > F          =     0.7856
                                                R-squared         =     0.0007
                                                Root MSE          =     .43303

                                 (Std. Err. adjusted for 74 clusters in schid)
------------------------------------------------------------------------------
             |               Robust
  wear_shoes |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        wgrp |
          1  |  -.0232631   .0434257    -0.54   0.594    -.1098103    .0632842
          3  |   9.59e-06   .0472285     0.00   1.000    -.0941167    .0941359
             |
       _cons |   .2592879   .0361733     7.17   0.000     .1871947    .3313812
------------------------------------------------------------------------------

. reg dayswat_99_36 ib2.wgrp, vce(cluster schid)

Linear regression                               Number of obs     =      8,867
                                                F(2, 73)          =       0.57
                                                Prob > F          =     0.5659
                                                R-squared         =     0.0039
                                                Root MSE          =     2.7641

                                 (Std. Err. adjusted for 74 clusters in schid)
------------------------------------------------------------------------------
             |               Robust
dayswat_9~36 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        wgrp |
          1  |   .0087151   .2696205     0.03   0.974    -.5286378     .546068
          3  |  -.3671634   .3765671    -0.98   0.333    -1.117661    .3833338
             |
       _cons |   2.388365   .1981307    12.05   0.000     1.993491    2.783239
------------------------------------------------------------------------------

. 
. *Table 6
. 
. use ".\data\namelist.dta", clear

. 
. keep if visit== 981
(521,880 observations deleted)

. drop if dupid==2
(11 observations deleted)

. 
. merge 1:1 pupid using ".\data\comply_new.dta"
(label sch_label already defined)

    Result                           # of obs.
    -----------------------------------------
    not matched                        11,099
        from master                       726  (_merge==1)
        from using                     10,373  (_merge==2)

    matched                            34,055  (_merge==3)
    -----------------------------------------

. rename _merge _mergecomply

. merge 1:1 pupid using ".\data\wormed.dta"
(label std_label already defined)
(label sch_label already defined)

    Result                           # of obs.
    -----------------------------------------
    not matched                        41,288
        from master                    41,212  (_merge==1)
        from using                         76  (_merge==2)

    matched                             3,942  (_merge==3)
    -----------------------------------------

. rename _merge _mergewormed

. 
. drop if elg98==.|any_ics99==.
(42,901 observations deleted)

. 
. *panel B
. *eligible
. 
. sum any_ics99 if wgrp==1 & elg98==1 & any98==1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics99 |        669    .2421525    .4287066          0          1

. sum any_ics99 if wgrp==1 & elg98==1 & any98==0

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics99 |         76    .3421053    .4775669          0          1

. 
. sum any_ics99 if wgrp==2 & elg98==1 & any99==1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics99 |        872    .5137615    .5000974          0          1

. sum any_ics99 if wgrp==2 & elg98==1 & any99==0

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics99 |        349    .5501433    .4981936          0          1

. 
. reg any_ics99 wgrp1 if ((wgrp==1 & any98==1)|(wgrp==2 & any99==1)) & elg98==1, vce(cluster schid)

Linear regression                               Number of obs     =      1,541
                                                F(1, 47)          =      19.47
                                                Prob > F          =     0.0001
                                                R-squared         =     0.0758
                                                Root MSE          =     .47044

                                 (Std. Err. adjusted for 48 clusters in schid)
------------------------------------------------------------------------------
             |               Robust
   any_ics99 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       wgrp1 |   -.271609   .0615549    -4.41   0.000    -.3954415   -.1477765
       _cons |   .5137615   .0476104    10.79   0.000     .4179816    .6095413
------------------------------------------------------------------------------

. reg any_ics99 wgrp1 if ((wgrp==1 & any98==0)|(wgrp==2 & any99==0)) & elg98==1, vce(cluster schid)

Linear regression                               Number of obs     =        425
                                                F(1, 47)          =       4.65
                                                Prob > F          =     0.0363
                                                R-squared         =     0.0254
                                                Root MSE          =      .4946

                                 (Std. Err. adjusted for 48 clusters in schid)
------------------------------------------------------------------------------
             |               Robust
   any_ics99 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       wgrp1 |   -.208038   .0965212    -2.16   0.036    -.4022137   -.0138623
       _cons |   .5501433   .0629158     8.74   0.000      .423573    .6767136
------------------------------------------------------------------------------

. 
. *non-eligible
. sum any_ics99 if wgrp==1 & elg98==0 & any98==1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics99 |         41    .2682927     .448575          0          1

. sum any_ics99 if wgrp==1 & elg98==0 & any98==0

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics99 |         75    .4266667    .4979236          0          1

. 
. sum any_ics99 if wgrp==2 & elg98==0 & any99==1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics99 |         19    .3157895    .4775669          0          1

. sum any_ics99 if wgrp==2 & elg98==0 & any99==0

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   any_ics99 |        224    .5357143    .4998398          0          1

. 
. reg any_ics99 wgrp1 if ((wgrp==1 & any98==1) | (wgrp==2 & any99==1)) & elg98==0, vce(cluster schid)

Linear regression                               Number of obs     =         60
                                                F(1, 25)          =       0.08
                                                Prob > F          =     0.7767
                                                R-squared         =     0.0024
                                                Root MSE          =     .45777

                                 (Std. Err. adjusted for 26 clusters in schid)
------------------------------------------------------------------------------
             |               Robust
   any_ics99 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       wgrp1 |  -.0474968   .1656267    -0.29   0.777    -.3886113    .2936177
       _cons |   .3157895   .1106425     2.85   0.009     .0879169    .5436621
------------------------------------------------------------------------------

. reg any_ics99 wgrp1 if ((wgrp==1 & any98==0) | (wgrp==2 & any99==0)) & elg98==0, vce(cluster schid)

Linear regression                               Number of obs     =        299
                                                F(1, 45)          =       1.43
                                                Prob > F          =     0.2384
                                                R-squared         =     0.0089
                                                Root MSE          =     .49936

                                 (Std. Err. adjusted for 46 clusters in schid)
------------------------------------------------------------------------------
             |               Robust
   any_ics99 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       wgrp1 |  -.1090476   .0912735    -1.19   0.238    -.2928819    .0747866
       _cons |   .5357143   .0561704     9.54   0.000     .4225814    .6488472
------------------------------------------------------------------------------

. 
. 
. *Table 7
. use ".\data\namelist.dta", clear

. 
. keep if visit== 981
(521,880 observations deleted)

. drop if dupid==2
(11 observations deleted)

. 
. merge 1:1 pupid using ".\data\wormed.dta"
(label std_label already defined)
(label sch_label already defined)

    Result                           # of obs.
    -----------------------------------------
    not matched                        31,037
        from master                    30,900  (_merge==1)
        from using                        137  (_merge==2)

    matched                             3,881  (_merge==3)
    -----------------------------------------

. keep if _merge!=1
(30,900 observations deleted)

. rename _merge _mergeworm

. 
. merge 1:1 pupid using ".\data\comply_new.dta"
(label sch_label already defined)

    Result                           # of obs.
    -----------------------------------------
    not matched                        40,568
        from master                        79  (_merge==1)
        from using                     40,489  (_merge==2)

    matched                             3,939  (_merge==3)
    -----------------------------------------

. keep if _merge!=1
(79 observations deleted)

. rename _merge _mergecomply

. 
. merge m:1 schid using ".\data\schoolvar.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        40,573
        from master                    40,550  (_merge==1)
        from using                         23  (_merge==2)

    matched                             3,878  (_merge==3)
    -----------------------------------------

. rename _merge _mergeschvar

. 
. *those treated when offered
. gen select=0

. replace select=1 if (wgrp==1 & any98==1) | (wgrp==2 & any99==1)
(2,617 real changes made)

. replace select=. if (any98==. & any99==.)
(12,329 real changes made, 12,329 to missing)

. gen wgrp1_select = wgrp1*select
(40,519 missing values generated)

. 
. gen pop1_3km_1000 = pop1_3km_original/1000
(40,550 missing values generated)

. gen pop1_36k_1000 = pop1_36k_original/1000
(40,550 missing values generated)

. gen popT_3km_1000 = popT_3km_original/1000
(40,550 missing values generated)

. gen popT_36k_1000 = popT_36k_original/1000
(40,550 missing values generated)

. 
. dprobit any_ics99 wgrp1 pop1_3km_1000 pop1_36k_1000 popT_3km_1000 popT_36k_1000 if (wgrp==1|wgrp==2), 
> vce(cluster schid)

Iteration 0:   log pseudolikelihood = -1588.7719
Iteration 1:   log pseudolikelihood =  -1439.577
Iteration 2:   log pseudolikelihood = -1438.4859
Iteration 3:   log pseudolikelihood = -1438.4858

Probit regression, reporting marginal effects           Number of obs =   2326
                                                        Wald chi2(5)  =  33.19
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -1438.4858                       Pseudo R2     = 0.0946

                                 (Std. Err. adjusted for 49 clusters in schid)
------------------------------------------------------------------------------
         |               Robust
any_i~99 |      dF/dx   Std. Err.      z    P>|z|     x-bar  [    95% C.I.   ]
---------+--------------------------------------------------------------------
   wgrp1*|  -.2365799   .0570105    -4.00   0.000   .370163  -.348318 -.124841
pop1_3.. |    -.15096   .0889692    -1.68   0.092   .403702  -.325336  .023416
pop1_3.. |  -.1730758   .0584696    -2.93   0.003   .725253  -.287674 -.058477
popT_3.. |    .101749   .0428182     2.39   0.017    1.2949   .017827  .185671
popT_3.. |   .1810413    .063238     2.84   0.005   2.31976   .057097  .304986
---------+--------------------------------------------------------------------
  obs. P |   .4290628
 pred. P |   .4204171  (at x-bar)
------------------------------------------------------------------------------
(*) dF/dx is for discrete change of dummy variable from 0 to 1
    z and P>|z| correspond to the test of the underlying coefficient being 0

. outreg2 using ".\output\table7.xlsx", dec(2) replace
.\output\table7.xlsx
dir : seeout

. 
. dprobit any_ics99 wgrp1 pop1_3km_1000 pop1_36k_1000 popT_3km_1000 popT_36k_1000 select wgrp1_select if
>  (wgrp==1|wgrp==2), vce(cluster schid)

Iteration 0:   log pseudolikelihood = -1587.9254
Iteration 1:   log pseudolikelihood = -1432.3461
Iteration 2:   log pseudolikelihood = -1430.9178
Iteration 3:   log pseudolikelihood = -1430.9174

Probit regression, reporting marginal effects           Number of obs =   2325
                                                        Wald chi2(7)  =  49.28
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -1430.9174                       Pseudo R2     = 0.0989

                                 (Std. Err. adjusted for 49 clusters in schid)
------------------------------------------------------------------------------
         |               Robust
any_i~99 |      dF/dx   Std. Err.      z    P>|z|     x-bar  [    95% C.I.   ]
---------+--------------------------------------------------------------------
   wgrp1*|  -.1268633   .0810359    -1.54   0.124   .370323  -.285691  .031964
pop1_3.. |   -.155844   .0915891    -1.69   0.091   .403416  -.335355  .023667
pop1_3.. |  -.1705724   .0588557    -2.87   0.004   .725355  -.285927 -.055217
popT_3.. |   .1043347   .0427461     2.45   0.014    1.2949   .020554  .188115
popT_3.. |   .1801742   .0622694     2.87   0.004   2.31931   .058128   .30222
  select*|  -.0307244   .0317356    -0.97   0.332   .688602  -.092925  .031476
wgrp1_~t*|  -.1333584   .0650279    -2.00   0.045   .305376  -.260811 -.005906
---------+--------------------------------------------------------------------
  obs. P |   .4288172
 pred. P |   .4189479  (at x-bar)
------------------------------------------------------------------------------
(*) dF/dx is for discrete change of dummy variable from 0 to 1
    z and P>|z| correspond to the test of the underlying coefficient being 0

. 
. save ".\data\table7_repdata.dta", replace
file .\data\table7_repdata.dta saved

. 
. *using weights
. 
. use ".\data\namelist.dta", clear

. 
. keep if visit== 981
(521,880 observations deleted)

. drop if dupid==2
(11 observations deleted)

. 
. collapse (count)count=pupid, by (schid)

. 
. merge 1:m schid using ".\data\table7_repdata.dta"
(label visit_label already defined)
(label sch_label already defined)
(label std_label already defined)

    Result                           # of obs.
    -----------------------------------------
    not matched                        40,550
        from master                         0  (_merge==1)
        from using                     40,550  (_merge==2)

    matched                             3,901  (_merge==3)
    -----------------------------------------

. 
. egen ndata=count(pupid), by(schid)

. 
. gen weights = count/ndata
(40,573 missing values generated)

. 
. dprobit any_ics99 wgrp1 pop1_3km_1000 pop1_36k_1000 popT_3km_1000 popT_36k_1000 if (wgrp==1|wgrp==2) [
> pw=weights], vce(cluster schid)

(sum of wgt is   1.4780e+04)
Iteration 0:   log pseudolikelihood = -1607.3187
Iteration 1:   log pseudolikelihood = -1441.3465
Iteration 2:   log pseudolikelihood = -1439.8642
Iteration 3:   log pseudolikelihood = -1439.8638

Probit regression, reporting marginal effects           Number of obs =   2326
                                                        Wald chi2(5)  =  34.61
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -1439.8638                       Pseudo R2     = 0.1042

                                 (Std. Err. adjusted for 49 clusters in schid)
------------------------------------------------------------------------------
         |               Robust
any_i~99 |      dF/dx   Std. Err.      z    P>|z|     x-bar  [    95% C.I.   ]
---------+--------------------------------------------------------------------
   wgrp1*|   -.249159    .056424    -4.30   0.000   .319426  -.359748  -.13857
pop1_3.. |  -.1385654   .0946315    -1.46   0.145   .446955   -.32404  .046909
pop1_3.. |  -.2295703   .0764054    -3.01   0.003   .707345  -.379322 -.079818
popT_3.. |   .1004034   .0445285     2.26   0.024   1.34072   .013129  .187678
popT_3.. |   .1949806   .0534876     3.63   0.000   2.31951   .090147  .299814
---------+--------------------------------------------------------------------
  obs. P |   .4674191
 pred. P |   .4608691  (at x-bar)
------------------------------------------------------------------------------
(*) dF/dx is for discrete change of dummy variable from 0 to 1
    z and P>|z| correspond to the test of the underlying coefficient being 0

. 
. dprobit any_ics99 wgrp1 pop1_3km_1000 pop1_36k_1000 popT_3km_1000 popT_36k_1000 select wgrp1_select if
>  (wgrp==1|wgrp==2) [pw=weights], vce(cluster schid)

(sum of wgt is   1.4761e+04)
Iteration 0:   log pseudolikelihood = -1606.4193
Iteration 1:   log pseudolikelihood = -1436.8666
Iteration 2:   log pseudolikelihood = -1435.1265
Iteration 3:   log pseudolikelihood = -1435.1258

Probit regression, reporting marginal effects           Number of obs =   2325
                                                        Wald chi2(7)  =  48.35
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -1435.1258                       Pseudo R2     = 0.1066

                                 (Std. Err. adjusted for 49 clusters in schid)
------------------------------------------------------------------------------
         |               Robust
any_i~99 |      dF/dx   Std. Err.      z    P>|z|     x-bar  [    95% C.I.   ]
---------+--------------------------------------------------------------------
   wgrp1*|  -.1419301   .0860683    -1.63   0.104   .319834  -.310621  .026761
pop1_3.. |  -.1435763   .0973028    -1.47   0.142   .446163  -.334286  .047134
pop1_3.. |    -.22593   .0768823    -2.94   0.003   .707623  -.376617 -.075243
popT_3.. |   .1026948   .0447128     2.31   0.021   1.34077   .015059   .19033
popT_3.. |    .192302   .0533217     3.59   0.000   2.31817   .087793  .296811
  select*|  -.0227793   .0341239    -0.67   0.503   .666129  -.089661  .044102
wgrp1_~t*|  -.1306572   .0724924    -1.76   0.079   .266226   -.27274  .011425
---------+--------------------------------------------------------------------
  obs. P |   .4667396
 pred. P |   .4593559  (at x-bar)
------------------------------------------------------------------------------
(*) dF/dx is for discrete change of dummy variable from 0 to 1
    z and P>|z| correspond to the test of the underlying coefficient being 0

. 
. 
. *controls
. dprobit any_ics99 wgrp1 pop1_3km_1000 pop1_36k_1000 popT_3km_1000 popT_36k_1000 obs sap1 sap2 sap3 sap
> 4 std mk96_s if (wgrp==1|wgrp==2) [pw=weights], vce(cluster schid)

(sum of wgt is   1.4780e+04)
Iteration 0:   log pseudolikelihood = -1607.3187
Iteration 1:   log pseudolikelihood = -1403.8389
Iteration 2:   log pseudolikelihood = -1401.5802
Iteration 3:   log pseudolikelihood =  -1401.579
Iteration 4:   log pseudolikelihood =  -1401.579

Probit regression, reporting marginal effects           Number of obs =   2326
                                                        Wald chi2(11) =      .
                                                        Prob > chi2   =      .
Log pseudolikelihood =  -1401.579                       Pseudo R2     = 0.1280

                                 (Std. Err. adjusted for 49 clusters in schid)
------------------------------------------------------------------------------
         |               Robust
any_i~99 |      dF/dx   Std. Err.      z    P>|z|     x-bar  [    95% C.I.   ]
---------+--------------------------------------------------------------------
   wgrp1*|   -.238646   .0552128    -4.18   0.000   .319426  -.346861 -.130431
pop1_3.. |  -.2329505   .1013193    -2.29   0.022   .446955  -.431533 -.034368
pop1_3.. |  -.1407799   .0752358    -1.86   0.062   .707345  -.288239  .006679
popT_3.. |   .1101576   .0420779     2.62   0.009   1.34072   .027686  .192629
popT_3.. |   .1346015   .0664693     2.02   0.044   2.31951   .004324  .264879
     obs*|  -.1413287   .1272734    -1.10   0.273   .455186   -.39078  .108123
    sap1*|   .2326916   .1568677     1.41   0.158   .168501  -.074763  .540147
    sap2*|   .0014576   .1200938     0.01   0.990   .055121  -.233922  .236837
    sap3*|   .1519225   .2227625     0.67   0.505   .082071  -.284684  .588529
    sap4*|   .3411416   .1653263     1.80   0.072   .155864   .017108  .665175
     std |  -.0236202   .0089807    -2.62   0.009   4.50276  -.041222 -.006018
  mk96_s |  -.0528807   .0414192    -1.28   0.201   .139186  -.134061    .0283
---------+--------------------------------------------------------------------
  obs. P |   .4674191
 pred. P |   .4626508  (at x-bar)
------------------------------------------------------------------------------
(*) dF/dx is for discrete change of dummy variable from 0 to 1
    z and P>|z| correspond to the test of the underlying coefficient being 0

. 
. dprobit any_ics99 wgrp1 pop1_3km_1000 pop1_36k_1000 popT_3km_1000 popT_36k_1000 select wgrp1_select ob
> s sap1 sap2 sap3 sap4 std mk96_s if (wgrp==1|wgrp==2) [pw=weights], vce(cluster schid)

(sum of wgt is   1.4761e+04)
Iteration 0:   log pseudolikelihood = -1606.4193
Iteration 1:   log pseudolikelihood = -1392.8295
Iteration 2:   log pseudolikelihood = -1389.9987
Iteration 3:   log pseudolikelihood = -1389.9966

Probit regression, reporting marginal effects           Number of obs =   2325
                                                        Wald chi2(13) =      .
                                                        Prob > chi2   =      .
Log pseudolikelihood = -1389.9966                       Pseudo R2     = 0.1347

                                 (Std. Err. adjusted for 49 clusters in schid)
------------------------------------------------------------------------------
         |               Robust
any_i~99 |      dF/dx   Std. Err.      z    P>|z|     x-bar  [    95% C.I.   ]
---------+--------------------------------------------------------------------
   wgrp1*|  -.1074809   .0768013    -1.39   0.166   .319834  -.258009  .043047
pop1_3.. |  -.2368872   .1038136    -2.27   0.023   .446163  -.440358 -.033416
pop1_3.. |  -.1334102   .0759898    -1.75   0.080   .707623  -.282347  .015527
popT_3.. |   .1129764   .0426191     2.66   0.008   1.34077   .029445  .196508
popT_3.. |   .1307244   .0664788     1.96   0.050   2.31817   .000428   .26102
  select*|  -.0636292   .0286931    -2.22   0.027   .666129  -.119867 -.007392
wgrp1_~t*|  -.1524581   .0728775    -2.03   0.043   .266226  -.295295 -.009621
     obs*|    .014241   .1303076     0.11   0.913   .455767  -.241157  .269639
    sap1*|    .075883   .1717152     0.44   0.659   .168716  -.260673  .412439
    sap2*|  -.1622177    .107739    -1.42   0.157   .053915  -.373382  .048947
    sap3*|  -.0183511   .2278658    -0.08   0.936   .082175   -.46496  .428258
    sap4*|   .1983898   .1899089     1.01   0.313   .156063  -.173825  .570604
     std |  -.0332387   .0091976    -3.59   0.000   4.50085  -.051266 -.015212
  mk96_s |  -.0532703   .0417934    -1.28   0.202   .140334  -.135184  .028643
---------+--------------------------------------------------------------------
  obs. P |   .4667396
 pred. P |   .4611196  (at x-bar)
------------------------------------------------------------------------------
(*) dF/dx is for discrete change of dummy variable from 0 to 1
    z and P>|z| correspond to the test of the underlying coefficient being 0

. 
. *schisto
. dprobit sm99_who wgrp1 pop1_3km_1000 pop1_36k_1000 popT_3km_1000 popT_36k_1000 obs sap1 sap2 sap3 sap4
>  std mk96_s if (wgrp==1|wgrp==2) [pw=weights], vce(cluster schid)

(sum of wgt is   1.4890e+04)
Iteration 0:   log pseudolikelihood = -1122.5537
Iteration 1:   log pseudolikelihood = -841.28293
Iteration 2:   log pseudolikelihood = -811.20373
Iteration 3:   log pseudolikelihood = -808.04597
Iteration 4:   log pseudolikelihood =  -807.9369
Iteration 5:   log pseudolikelihood = -807.92592
Iteration 6:   log pseudolikelihood =  -807.9225
Iteration 7:   log pseudolikelihood = -807.92139
Iteration 8:   log pseudolikelihood = -807.92102
Iteration 9:   log pseudolikelihood =  -807.9209
Iteration 10:  log pseudolikelihood = -807.92086
Iteration 11:  log pseudolikelihood = -807.92085
Iteration 12:  log pseudolikelihood = -807.92084
Iteration 13:  log pseudolikelihood = -807.92084
Iteration 14:  log pseudolikelihood = -807.92084
Iteration 15:  log pseudolikelihood = -807.92084
Iteration 16:  log pseudolikelihood = -807.92084
Iteration 17:  log pseudolikelihood = -807.92084
Iteration 18:  log pseudolikelihood = -807.92084

Probit regression, reporting marginal effects           Number of obs =   2345
                                                        Wald chi2(11) =      .
                                                        Prob > chi2   =      .
Log pseudolikelihood = -807.92084                       Pseudo R2     = 0.2803

                                 (Std. Err. adjusted for 49 clusters in schid)
------------------------------------------------------------------------------
         |               Robust
sm99_who |      dF/dx   Std. Err.      z    P>|z|     x-bar  [    95% C.I.   ]
---------+--------------------------------------------------------------------
   wgrp1*|  -.0327815   .0313223    -1.03   0.302   .319745  -.094172  .028609
pop1_3.. |  -.1259678   .0453338    -2.71   0.007   .447296   -.21482 -.037115
pop1_3.. |  -.2437868   .0403538    -5.49   0.000   .707688  -.322879 -.164695
popT_3.. |   .1349435   .0251486     5.74   0.000   1.33902   .085653  .184234
popT_3.. |   .1502135     .03934     4.05   0.000   2.32004   .073108  .227319
     obs*|   .8666021    .026014    17.88   0.000   .455265   .815616  .917589
    sap1*|  -.2401443   .0375023   -13.68   0.000    .16911  -.313648 -.166641
    sap2*|  -.1465275   .0240256   -20.06   0.000   .055032  -.193617 -.099438
    sap3*|  -.1835315   .0282104        .       .   .082741  -.238823  -.12824
    sap4*|  -.2283497   .0288517   -12.27   0.000   .154706  -.284898 -.171801
     std |    .001869   .0054076     0.35   0.730   4.50715   -.00873  .012468
  mk96_s |   .0321482     .02306     1.47   0.140   .138844  -.013049  .077345
---------+--------------------------------------------------------------------
  obs. P |   .1848718
 pred. P |   .0883975  (at x-bar)
------------------------------------------------------------------------------
(*) dF/dx is for discrete change of dummy variable from 0 to 1
    z and P>|z| correspond to the test of the underlying coefficient being 0

. 
. 
. dprobit sm99_who wgrp1 pop1_3km_1000 pop1_36k_1000 popT_3km_1000 popT_36k_1000 select wgrp1_select obs
>  sap1 sap2 sap3 sap4 std mk96_s if (wgrp==1|wgrp==2) [pw=weights], vce(cluster schid)

(sum of wgt is   1.4871e+04)
Iteration 0:   log pseudolikelihood = -1122.8889
Iteration 1:   log pseudolikelihood = -838.15867
Iteration 2:   log pseudolikelihood = -807.37475
Iteration 3:   log pseudolikelihood = -804.16499
Iteration 4:   log pseudolikelihood = -804.06524
Iteration 5:   log pseudolikelihood = -804.05642
Iteration 6:   log pseudolikelihood = -804.05368
Iteration 7:   log pseudolikelihood = -804.05279
Iteration 8:   log pseudolikelihood =  -804.0525
Iteration 9:   log pseudolikelihood =  -804.0524
Iteration 10:  log pseudolikelihood = -804.05237
Iteration 11:  log pseudolikelihood = -804.05235
Iteration 12:  log pseudolikelihood = -804.05235
Iteration 13:  log pseudolikelihood = -804.05235
Iteration 14:  log pseudolikelihood = -804.05235
Iteration 15:  log pseudolikelihood = -804.05235
Iteration 16:  log pseudolikelihood = -804.05235
Iteration 17:  log pseudolikelihood = -804.05235
Iteration 18:  log pseudolikelihood = -804.05235

Probit regression, reporting marginal effects           Number of obs =   2344
                                                        Wald chi2(13) =      .
                                                        Prob > chi2   =      .
Log pseudolikelihood = -804.05235                       Pseudo R2     = 0.2839

                                 (Std. Err. adjusted for 49 clusters in schid)
------------------------------------------------------------------------------
         |               Robust
sm99_who |      dF/dx   Std. Err.      z    P>|z|     x-bar  [    95% C.I.   ]
---------+--------------------------------------------------------------------
   wgrp1*|  -.0204789   .0483533    -0.41   0.679    .32015   -.11525  .074292
pop1_3.. |  -.1269722   .0452866    -2.75   0.006   .446511  -.215732 -.038212
pop1_3.. |  -.2457903   .0397987    -5.56   0.000   .707965  -.323794 -.167786
popT_3.. |   .1364012   .0247468     5.91   0.000   1.33907   .087898  .184904
popT_3.. |   .1526478    .038934     4.16   0.000   2.31871   .076339  .228957
  select*|   .0394274   .0171329     2.09   0.037   .666269   .005848  .073007
wgrp1_~t*|  -.0255488   .0477717    -0.51   0.613    .26694   -.11918  .068082
     obs*|   .8411197   .0405791    14.33   0.000   .455842   .761586  .920653
    sap1*|  -.2294243   .0412824    -9.02   0.000   .169324  -.310336 -.148512
    sap2*|  -.1424281   .0240982        .       .   .053835   -.18966 -.095197
    sap3*|  -.1778648   .0293996   -19.36   0.000   .082846  -.235487 -.120243
    sap4*|   -.218207   .0318335    -9.38   0.000   .154902  -.280599 -.155815
     std |   .0052524   .0052656     0.99   0.323   4.50526  -.005068  .015573
  mk96_s |   .0314252   .0229448     1.45   0.146   .139984  -.013546  .076396
---------+--------------------------------------------------------------------
  obs. P |   .1851059
 pred. P |   .0883055  (at x-bar)
------------------------------------------------------------------------------
(*) dF/dx is for discrete change of dummy variable from 0 to 1
    z and P>|z| correspond to the test of the underlying coefficient being 0

. 
. *geo-helminth
. dprobit any_geo99_original wgrp1 pop1_3km_1000 pop1_36k_1000 popT_3km_1000 popT_36k_1000 obs sap1 sap2
>  sap3 sap4 std mk96_s if (wgrp==1|wgrp==2) [pw=weights], vce(cluster schid)

(sum of wgt is   1.4780e+04)
Iteration 0:   log pseudolikelihood = -1401.0092
Iteration 1:   log pseudolikelihood = -1314.6483
Iteration 2:   log pseudolikelihood = -1313.9788
Iteration 3:   log pseudolikelihood = -1313.9786

Probit regression, reporting marginal effects           Number of obs =   2326
                                                        Wald chi2(11) =      .
                                                        Prob > chi2   =      .
Log pseudolikelihood = -1313.9786                       Pseudo R2     = 0.0621

                                 (Std. Err. adjusted for 49 clusters in schid)
------------------------------------------------------------------------------
         |               Robust
any_ge~l |      dF/dx   Std. Err.      z    P>|z|     x-bar  [    95% C.I.   ]
---------+--------------------------------------------------------------------
   wgrp1*|  -.1971826   .0421484    -4.44   0.000   .319426  -.279792 -.114573
pop1_3.. |  -.1062126   .0757026    -1.38   0.167   .446955  -.254587  .042162
pop1_3.. |   .0587689   .0687754     0.86   0.390   .707345  -.076028  .193566
popT_3.. |   .0361265   .0386561     0.94   0.347   1.34072  -.039638  .111891
popT_3.. |   .0487521   .0513692     0.95   0.340   2.31951   -.05193  .149434
     obs*|  -.1542857   .1160882    -1.28   0.201   .455186  -.381814  .073243
    sap1*|   .1892107   .1634885     1.21   0.227   .168501  -.131221  .509642
    sap2*|   .1698779   .0984047     1.80   0.071   .055121  -.022992  .362748
    sap3*|   .1628246   .1917893     0.90   0.370   .082071  -.213075  .538725
    sap4*|   .2188359   .1659223     1.38   0.169   .155864  -.106366  .544038
     std |   -.019333   .0056839    -3.41   0.001   4.50276  -.030473 -.008193
  mk96_s |  -.0816437   .0331156    -2.46   0.014   .139186  -.146549 -.016738
---------+--------------------------------------------------------------------
  obs. P |   .2901943
 pred. P |   .2772744  (at x-bar)
------------------------------------------------------------------------------
(*) dF/dx is for discrete change of dummy variable from 0 to 1
    z and P>|z| correspond to the test of the underlying coefficient being 0

. 
. 
. dprobit any_geo99_original wgrp1 pop1_3km_1000 pop1_36k_1000 popT_3km_1000 popT_36k_1000 select wgrp1_
> select obs sap1 sap2 sap3 sap4 std mk96_s if (wgrp==1|wgrp==2) [pw=weights], vce(cluster schid)

(sum of wgt is   1.4761e+04)
Iteration 0:   log pseudolikelihood = -1398.5189
Iteration 1:   log pseudolikelihood = -1306.8533
Iteration 2:   log pseudolikelihood = -1305.8981
Iteration 3:   log pseudolikelihood = -1305.8976

Probit regression, reporting marginal effects           Number of obs =   2325
                                                        Wald chi2(13) =      .
                                                        Prob > chi2   =      .
Log pseudolikelihood = -1305.8976                       Pseudo R2     = 0.0662

                                 (Std. Err. adjusted for 49 clusters in schid)
------------------------------------------------------------------------------
         |               Robust
any_ge~l |      dF/dx   Std. Err.      z    P>|z|     x-bar  [    95% C.I.   ]
---------+--------------------------------------------------------------------
   wgrp1*|  -.1074884   .0535053    -1.94   0.053   .319834  -.212357  -.00262
pop1_3.. |  -.1096017   .0777225    -1.39   0.165   .446163  -.261935  .042732
pop1_3.. |   .0652888   .0694892     0.95   0.345   .707623  -.070908  .201485
popT_3.. |   .0375994    .038726     0.98   0.328   1.34077  -.038302  .113501
popT_3.. |   .0448311   .0509671     0.88   0.377   2.31817  -.055063  .144725
  select*|  -.0431029   .0203254    -2.13   0.033   .666129   -.08294 -.003266
wgrp1_~t*|  -.1107725   .0373056    -2.83   0.005   .266226   -.18389 -.037655
     obs*|  -.0334707   .1246291    -0.27   0.789   .455767  -.277739  .210798
    sap1*|   .0502017   .1564385     0.33   0.743   .168716  -.256412  .356815
    sap2*|   .0222446   .0887637     0.25   0.800   .053915  -.151729  .196218
    sap3*|   .0166955   .1731718     0.10   0.922   .082175  -.322715  .356106
    sap4*|    .077766   .1583587     0.51   0.612   .156063  -.232611  .388143
     std |  -.0260466   .0065651    -3.96   0.000   4.50085  -.038914 -.013179
  mk96_s |  -.0819591   .0328241    -2.49   0.013   .140334  -.146293 -.017625
---------+--------------------------------------------------------------------
  obs. P |   .2892886
 pred. P |   .2749047  (at x-bar)
------------------------------------------------------------------------------
(*) dF/dx is for discrete change of dummy variable from 0 to 1
    z and P>|z| correspond to the test of the underlying coefficient being 0

. 
. 
. *close log
. log close
      name:  <unnamed>
       log:  C:\Users\johnd\OneDrive\Desktop\sose21\Dev\miguel_kremer(2004)\code\migkrem_2004_rep.log
  log type:  text
 closed on:  28 Jan 2024, 01:02:41
--------------------------------------------------------------------------------------------------------
